# Тест-кейсы для модуля оплаты банковской картой

Оплата происходит через внешний платежный шлюз после нажатия кнопки «Оплатить».

## Основные этапы процесса
1. Клиентская валидация  
2. Отправка данных в платежный шлюз  
3. Возможный редирект на 3-D Secure  
4. Ответ шлюза: успешно / отклонено банком / ошибка сервиса  
5. Обновление статуса заказа  
6. Показ результата пользователю  
7. Отправка чека на email (при успехе)

# Позитивные тест-кейсы — Оплата банковской картой

**Модуль / функционал**: Оплата заказа через внешний платёжный шлюз  
**Цель покрытия**: Happy Path + основные успешные вариации

| ID      | Название теста                                              | Предусловия                                                                                       | Шаги теста                                                                                                                                               | Ожидаемый результат                                                                                           |
|---------|-------------------------------------------------------------|---------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------|
| TC-P01  | Успешная оплата картой Visa без 3-D Secure                 | • Пользователь авторизован<br>• Корзина не пуста<br>• Заказ создан, статус «Ожидает оплаты»<br>• Валидный email указан | 1. Перейти на страницу оплаты<br>2. Ввести тестовые данные карты Visa (без 3DS, успешная)<br>3. Заполнить все поля корректно<br>4. Нажать «Оплатить»     | • Клиентская валидация пройдена<br>• Нет редиректа на 3DS<br>• Экран «Оплата прошла успешно»<br>• Заказ → «Оплачен»<br>• Чек на email |
| TC-P02  | Успешная оплата картой Mastercard с 3-D Secure             | То же, что в TC-P01                                                                               | 1. Перейти на страницу оплаты<br>2. Ввести данные тестовой карты MC (с 3DS)<br>3. Нажать «Оплатить»<br>4. На 3DS ввести корректный код / подтвердить     | • Редирект на 3DS → успешное прохождение<br>• Возврат в приложение<br>• Экран успеха<br>• Заказ оплачен<br>• Чек отправлен |
| TC-P03  | Успешная оплата картой «Мир»                               | То же, что в TC-P01                                                                               | 1. Ввести данные тестовой карты «Мир» (успешная)<br>2. Нажать «Оплатить»<br>3. Пройти 3DS при необходимости                                               | • Оплата завершается успешно<br>• Статус заказа обновлён<br>• Сообщение об успехе<br>• Чек на email            |
| TC-P04  | Оплата на минимально возможную сумму (1 ₽ / 1 цент)        | • Система разрешает заказы от 1 коп.<br>• Тестовая карта с балансом                              | 1. Создать заказ на 1 ₽<br>2. Перейти к оплате<br>3. Ввести валидные данные карты<br>4. Оплатить                                                       | • Оплата проходит<br>• Заказ оплачен<br>• Чек отправлен (если настроено для малых сумм)                        |
| TC-P05  | Оплата на максимально допустимую сумму (граничное значение) | • Установлен верхний лимит (например 500 000 ₽)<br>• Карта позволяет такую сумму                 | 1. Создать заказ ровно на максимальную сумму<br>2. Оплатить валидной картой                                                                              | • Оплата успешно завершена<br>• Заказ оплачен<br>• Чек отправлен                                              |
| TC-P06  | Оплата с именем держателя на латинице (стандарт)           | То же, что в TC-P01                                                                               | 1. Cardholder Name: IVAN PETROV<br>2. Остальные данные корректны<br>3. Нажать «Оплатить»                                                                | • Оплата проходит без ошибок<br>• Всё как в TC-P01                                                             |
| TC-P07  | Повторный просмотр / отправка чека после успешной оплаты   | • Выполнен любой успешный платёж (например TC-P01)                                                | 1. Зайти в историю заказов / детали заказа<br>2. Нажать «Посмотреть чек» / «Отправить чек повторно»                                                     | • Отображается корректный чек (PDF/страница)<br>• Или приходит повторное письмо с чеком                       |
| TC-P08  | Оплата в нерабочие часы / ночью                            | • Система работает 24/7                                                                           | 1. Выполнить любой успешный сценарий (например TC-P01) в 03:00 по времени сервера                                                                        | • Оплата проходит без отличий от дневного времени<br>• Чек приходит в течение 1–5 минут                        |
